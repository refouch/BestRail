<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test Backend SNCF</title>
</head>
<body>
    <h2>Test de Recherche d'Itinéraire</h2>
    
    <label>Départ (ID) : <input type="number" id="input_depart" value="1"></label>
    <br><br>
    <label>Arrivée (ID) : <input type="number" id="input_arrivee" value="3"></label>
    <br><br>
    
    <button onclick="lancerRecherche()">Chercher le train</button>

    <hr>
    <h3>Résultat reçu du Backend :</h3>
    <pre id="zone_resultat" style="background: #f4f4f4; padding: 10px;">En attente...</pre>

    <script>
        // C'est ici que la magie opère (le Javascript)
        async function lancerRecherche() {
            // 1. On récupère les valeurs tapées par l'utilisateur
            const depart = document.getElementById('input_depart').value;
            const arrivee = document.getElementById('input_arrivee').value;
            
            try {
                // 2. C'est le point CRITIQUE : on appelle ton URL FastAPI
                // Note comment on injecte les variables dans l'URL
                const url = `http://127.0.0.1:8000/search?id_depart=${depart}&id_arrivee=${arrivee}`;
                
                const reponse = await fetch(url);
                
                // 3. On transforme la réponse en JSON
                const donnees = await reponse.json();
                
                // 4. On affiche le résultat dans la page
                document.getElementById('zone_resultat').textContent = JSON.stringify(donnees, null, 2);
            } catch (erreur) {
                document.getElementById('zone_resultat').textContent = "Erreur : " + erreur;
            }
        }
    </script>
</body>
</html>